{{ define "main" }}
<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h2 class="mb-4">{{.Title }}</h2>
        <img src="{{.Params.Image | absURL }}" alt="{{.Site.Params.author}}" class="img-fluid w-100 mb-4">
        {{ .Content }}
        
        <!-- ğŸ“¨ ì´ë©”ì¼ í¼ -->
        <form id="contact-form" method="POST" action="{{ .Site.Params.contact_form_action }}" class="row mt-5">
          <div class="col-lg-6">
            <input type="text" class="form-control mb-4" name="name" id="name" placeholder="Name" required>
          </div>
          <div class="col-lg-6">
            <input type="email" class="form-control mb-4" name="email" id="email" placeholder="Email" required>
          </div>
          <div class="col-12">
            <textarea name="message" id="message" class="form-control mb-4" placeholder="Message..." required></textarea>
          </div>
          <div class="col-12">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>         
          
          <!-- âœ… ì„±ê³µ ë©”ì‹œì§€ -->
          <div id="thankyou_message" style="display:none;">
            <h2><em>Thanks</em> for contacting us! We will get back to you soon!</h2>
          </div>
        </form>

      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
      const form = document.querySelector(".gfrom");
  
      form.addEventListener("submit", async function (event) {
          event.preventDefault(); // ê¸°ë³¸ í¼ ì œì¶œ ë°©ì§€
  
          const formData = new FormData(form);
          const actionURL = form.getAttribute("action");
  
          try {
              let response = await fetch(actionURL, {
                  method: "POST",
                  body: formData
              });
  
              let result = await response.text();  // JSON ëŒ€ì‹  í…ìŠ¤íŠ¸ë¡œ ì²˜ë¦¬
  
              // âœ… Google Apps Scriptê°€ JSON ì‘ë‹µì„ ë°˜í™˜í•˜ë©´ íŒŒì‹±
              try {
                  result = JSON.parse(result);
              } catch (e) {
                  console.warn("ì‘ë‹µì´ JSON í˜•ì‹ì´ ì•„ë‹˜:", result);
              }
  
              if (result.status === "success") {
                  alert("âœ… ë©”ì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
                  window.location.reload(); // âœ… Contact í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
              } else {
                  alert("âŒ ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨: " + (result.message || "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"));
              }
          } catch (error) {
              console.error("Error:", error);
              alert("âŒ ë©”ì¼ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
          }
      });
  });

</script>


{{ partial "instafeed.html" . }}

{{ end }}
