{{ define "main" }}
<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h2 class="mb-4">{{.Title }}</h2>
        <img src="{{.Params.Image | absURL }}" alt="{{.Site.Params.author}}" class="img-fluid w-100 mb-4">
        {{ .Content }}
        
        <!-- ğŸ“¨ ì´ë©”ì¼ í¼ -->
        <form id="contact-form" class="row mt-5">
          <div class="col-lg-6">
              <input type="text" class="form-control mb-4" name="name" id="name" placeholder="Name" required>
          </div>
          <div class="col-lg-6">
              <input type="email" class="form-control mb-4" name="email" id="email" placeholder="Email" required>
          </div>
          <div class="col-12">
              <textarea name="message" id="message" class="form-control mb-4" placeholder="Message..." required></textarea>
          </div>
          <div class="col-12 text-left">
              <button type="submit" id="submit-btn" class="btn btn-primary px-4 py-2">
                  ğŸ“© Send Message
              </button>
              <p id="loading-message" class="mt-2">ğŸ“¨ ë©”ì¼ì„ ë³´ë‚´ëŠ” ì¤‘...</p>
          </div>
        </form>

        <style>
          /* ğŸ“Œ ë¡œë”© ë©”ì‹œì§€ ì• ë‹ˆë©”ì´ì…˜ */
          #loading-message {
              display: none;
              color: #007bff;
              font-weight: bold;
              animation: fadeInOut 1s infinite alternate;
          }
          
          @keyframes fadeInOut {
              0% { opacity: 0.3; }
              100% { opacity: 1; }
          }

          /* ğŸ“Œ ë²„íŠ¼ ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ */
          #submit-btn:disabled {
              background-color: gray;
              cursor: not-allowed;
          }
        </style>

        <script>
        document.addEventListener("DOMContentLoaded", function () {
            const form = document.getElementById("contact-form");
            const submitButton = document.getElementById("submit-btn");
            const loadingMessage = document.getElementById("loading-message");

            form.addEventListener("submit", function (event) {
                event.preventDefault();

                // âœ… ë²„íŠ¼ ë¹„í™œì„±í™” + ë¡œë”© UI í‘œì‹œ
                submitButton.disabled = true;
                loadingMessage.style.display = "block";

                const formData = new FormData(this);

                fetch("https://script.google.com/macros/s/AKfycbxEKBajtt71D09Hms61yKAA__s7YXvdUJ-pLOMBu1sS3_u6wl0eVUfSsX8Sg1kLIK34Ew/exec", {
                    method: "POST",
                    body: formData
                })
                .then(response => response.text())
                .then(data => {
                    alert("âœ… ë©”ì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
                    window.location.href = "https://mtinet.cc/contact"; // âœ… í˜„ì¬ ì°½ì—ì„œ contact í˜ì´ì§€ë¡œ ì´ë™
                })
                .catch(error => {
                    console.error("Error:", error);
                    alert("âŒ ë©”ì¼ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                })
                .finally(() => {
                    // âœ… ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™” + ë¡œë”© ë©”ì‹œì§€ ìˆ¨ê¹€
                    submitButton.disabled = false;
                    loadingMessage.style.display = "none";
                });
            });
        });
        </script>
      </div>
    </div>
  </div>
</section>

{{ partial "instafeed.html" . }}

{{ end }}
